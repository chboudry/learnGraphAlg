{
  "title": "Louvain Community Detection",
  "category": "Community Detection",
  "description": "The **Louvain algorithm** [üîó](https://arxiv.org/pdf/0803.0476) is a method for finding communities in large networks. It maximizes the *modularity* measure, which quantifies the quality of a division of a network into communities.\n\n### Key Features:\n- **Fast**: Runs in O(n log n) time\n- **Hierarchical**: Creates a hierarchy of communities\n- **Greedy**: Uses a greedy optimization approach\n\n### Newman Modularity Formula:\n\nThe **Newman modularity** (Q) measures the quality of a network partition into communities:\n\n```\nQ = 1/(2m) Œ£[Aij - (ki √ó kj)/(2m)] Œ¥(ci, cj)\n```\n\n**Where:**\n- `Aij` = element of adjacency matrix (1 if edge exists between i and j, 0 otherwise)\n- `ki`, `kj` = degrees of nodes i and j (number of edges connected to each node)\n- `m` = total number of edges in the network\n- `Œ¥(ci, cj)` = Kronecker delta (1 if nodes i and j are in the same community, 0 otherwise)\n- The sum is over all pairs of nodes\n\n**Interpretation:**\n- The term `Aij` represents the **actual** number of edges between nodes i and j\n- The term `(ki √ó kj)/(2m)` represents the **expected** number of edges in a random network with the same degree distribution\n- **Q > 0**: More edges within communities than expected by chance ‚Üí good partition\n- **Q = 0**: Edges distributed as in a random network ‚Üí no community structure\n- **Q < 0**: Fewer edges within communities than expected ‚Üí poor partition\n- **Maximum theoretical Q ‚âà 1**: Perfect community structure (rarely achieved in practice)\n\n**Benefits:**\n- ‚úÖ **Universal metric**: Works for any network type (weighted, directed, undirected)\n- ‚úÖ **Null model comparison**: Compares against random graph baseline\n- ‚úÖ **Resolution independence**: Detects communities at multiple scales\n- ‚úÖ **Intuitive interpretation**: Higher Q means better community structure\n- ‚úÖ **Widely adopted**: Standard metric in network science\n\n**Limitations:**\n- ‚ö†Ô∏è **Resolution limit**: May fail to detect small communities in large networks\n- ‚ö†Ô∏è **Computational cost**: O(n¬≤) for dense networks\n- ‚ö†Ô∏è **Local optima**: Greedy optimization may not find global maximum\n- ‚ö†Ô∏è **No ground truth**: High Q doesn't guarantee \"correct\" communities\n- ‚ö†Ô∏è **Sensitivity to network size**: Harder to achieve high Q in very large networks\n\n### Applications:\n- Social network analysis\n- Biological networks\n- Citation networks",
  "steps": [
    {
      "name": "Initial Graph",
      "description": "**Initial State**: Each node starts in its own community.\n\nüîó **Graph Structure**:\n- **Nodes**: A, B, C, D, E, F (6 nodes)\n- **Edges**: 7 edges total (m=7)\n- **Pattern**: Two triangles connected by a bridge\n\n### Initial State:\n- **Communities**: {A}, {B}, {C}, {D}, {E}, {F}\n- **Modularity Q**: 0.0\n\n### Node Degrees:\n- Node A: degree 2 (connected to B, C)\n- Node B: degree 2 (connected to A, C)\n- Node C: degree 3 (connected to A, B, D)\n- Node D: degree 3 (connected to C, E, F)\n- Node E: degree 2 (connected to D, F)\n- Node F: degree 2 (connected to D, E)\n\n**Total edges (2m)**: 14",
      "nodes": [
        {
          "id": "A",
          "captions": [{ "value": "A | deg:2" }],
          "color": "#888888"
        },
        {
          "id": "B",
          "captions": [{ "value": "B | deg:2" }],
          "color": "#888888"
        },
        {
          "id": "C",
          "captions": [{ "value": "C | deg:3" }],
          "color": "#888888"
        },
        {
          "id": "D",
          "captions": [{ "value": "D | deg:3" }],
          "color": "#888888"
        },
        {
          "id": "E",
          "captions": [{ "value": "E | deg:2" }],
          "color": "#888888"
        },
        {
          "id": "F",
          "captions": [{ "value": "F | deg:2" }],
          "color": "#888888"
        }
      ],
      "relationships": [
        {
          "id": "AB",
          "from": "A",
          "to": "B",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "AC",
          "from": "A",
          "to": "C",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "BC",
          "from": "B",
          "to": "C",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "CD",
          "from": "C",
          "to": "D",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "DE",
          "from": "D",
          "to": "E",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "DF",
          "from": "D",
          "to": "F",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "EF",
          "from": "E",
          "to": "F",
          "captions": [{ "value": "w:1" }]
        }
      ]
    },
    {
      "name": "Phase 1 - Start",
      "description": "üîÑ **Phase 1: Local Moving Phase**\n\nThe algorithm iterates through each node and evaluates whether moving it to a neighbor's community improves modularity.\n\n### Newman Modularity Formula:\n```\nŒîQ = [Œ£in + ki,in] / 2m - [(Œ£tot + ki) / 2m]¬≤\n     - [Œ£in / 2m - (Œ£tot / 2m)¬≤ - (ki / 2m)¬≤]\n```\n\nWhere:\n- **Œ£in**: sum of weights of links inside community\n- **Œ£tot**: sum of degrees of nodes in community\n- **ki**: degree of node i\n- **ki,in**: links from i to nodes in community\n- **m**: total edges (7)\n\n### System Stack:\n- **Queue**: [A, B, C, D, E, F]\n- **Current**: Ready to process node A\n\n### üìù Note:\n**Starting node selection**: The choice to start with node A is completely **arbitrary**. The Louvain algorithm can begin with any node in the network. Different starting points may lead to different intermediate states but typically converge to similar quality partitions.",
      "nodes": [
        {
          "id": "A",
          "captions": [{ "value": "A | deg:2 | next" }],
          "color": "#ffeb3b"
        },
        {
          "id": "B",
          "captions": [{ "value": "B | deg:2" }],
          "color": "#888888"
        },
        {
          "id": "C",
          "captions": [{ "value": "C | deg:3" }],
          "color": "#888888"
        },
        {
          "id": "D",
          "captions": [{ "value": "D | deg:3" }],
          "color": "#888888"
        },
        {
          "id": "E",
          "captions": [{ "value": "E | deg:2" }],
          "color": "#888888"
        },
        {
          "id": "F",
          "captions": [{ "value": "F | deg:2" }],
          "color": "#888888"
        }
      ],
      "relationships": [
        {
          "id": "AB",
          "from": "A",
          "to": "B",
          "captions": [{ "value": "w:1" }],
          "color": "#ffeb3b"
        },
        {
          "id": "AC",
          "from": "A",
          "to": "C",
          "captions": [{ "value": "w:1" }],
          "color": "#ffeb3b"
        },
        {
          "id": "BC",
          "from": "B",
          "to": "C",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "CD",
          "from": "C",
          "to": "D",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "DE",
          "from": "D",
          "to": "E",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "DF",
          "from": "D",
          "to": "F",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "EF",
          "from": "E",
          "to": "F",
          "captions": [{ "value": "w:1" }]
        }
      ]
    },
    {
      "name": "Node A - Evaluate",
      "description": "üìä **Evaluating Node A**\n\n### Current State:\n- Node A in community {A}\n- Neighbors: B, C (both in separate communities)\n\n### Option 1: Join community {B}\n```\nki,in = 1 (A‚ÜíB edge)\nŒ£in = 0 (no internal edges in {B})\nŒ£tot = 2 (degree of B)\nki = 2 (degree of A)\n\nŒîQ(A‚Üí{B}) = [0 + 1]/14 - [(2 + 2)/14]¬≤\n            - [0/14 - (2/14)¬≤ - (2/14)¬≤]\n          = 0.071 - 0.082 - (-0.041)\n          = 0.030 ‚úì Positive!\n```\n\n### Option 2: Join community {C}\n```\nŒîQ(A‚Üí{C}) = [0 + 1]/14 - [(3 + 2)/14]¬≤\n            - [0/14 - (3/14)¬≤ - (2/14)¬≤]\n          = 0.071 - 0.127 - (-0.066)\n          = 0.010 ‚úì Positive!\n```\n\n**Decision**: Join {B} (ŒîQ = 0.030 > 0.010)\n\n### System Stack:\n- **Processed**: [A]\n- **Queue**: [B, C, D, E, F]\n- **Communities**: {A,B}, {C}, {D}, {E}, {F}",
      "nodes": [
        {
          "id": "A",
          "captions": [{ "value": "A ‚Üí joins B" }],
          "color": "#ff6b6b"
        },
        {
          "id": "B",
          "captions": [{ "value": "B | C:{A,B}" }],
          "color": "#ff6b6b"
        },
        {
          "id": "C",
          "captions": [{ "value": "C | next" }],
          "color": "#ffeb3b"
        },
        {
          "id": "D",
          "captions": [{ "value": "D" }],
          "color": "#888888"
        },
        {
          "id": "E",
          "captions": [{ "value": "E" }],
          "color": "#888888"
        },
        {
          "id": "F",
          "captions": [{ "value": "F" }],
          "color": "#888888"
        }
      ],
      "relationships": [
        {
          "id": "AB",
          "from": "A",
          "to": "B",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "AC",
          "from": "A",
          "to": "C",
          "captions": [{ "value": "w:1" }],
          "color": "#ffeb3b"
        },
        {
          "id": "BC",
          "from": "B",
          "to": "C",
          "captions": [{ "value": "w:1" }],
          "color": "#ffeb3b"
        },
        {
          "id": "CD",
          "from": "C",
          "to": "D",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "DE",
          "from": "D",
          "to": "E",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "DF",
          "from": "D",
          "to": "F",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "EF",
          "from": "E",
          "to": "F",
          "captions": [{ "value": "w:1" }]
        }
      ]
    },
    {
      "name": "Node C - Evaluate",
      "description": "üìä **Evaluating Node C**\n\n### Current State:\n- Node C in community {C}\n- Neighbors: A (in {A,B}), B (in {A,B}), D (in {D})\n\n### Option 1: Join community {A,B}\n```\nki,in = 2 (C‚ÜíA and C‚ÜíB edges)\nŒ£in = 1 (A-B edge inside {A,B})\nŒ£tot = 4 (deg(A) + deg(B) = 2+2)\nki = 3 (degree of C)\n\nŒîQ(C‚Üí{A,B}) = [1 + 2]/14 - [(4 + 3)/14]¬≤\n              - [1/14 - (4/14)¬≤ - (3/14)¬≤]\n            = 0.214 - 0.250 - (-0.053)\n            = 0.017 ‚úì Positive!\n```\n\n### Option 2: Join community {D}\n```\nki,in = 1 (C‚ÜíD edge)\nŒ£in = 0\nŒ£tot = 3\nki = 3\n\nŒîQ(C‚Üí{D}) = [0 + 1]/14 - [(3 + 3)/14]¬≤\n          = 0.071 - 0.184 - 0\n          = -0.113 ‚úó Negative!\n```\n\n**Decision**: Join {A,B} (positive gain)\n\n### System Stack:\n- **Processed**: [A, C]\n- **Queue**: [B, D, E, F]\n- **Communities**: {A,B,C}, {D}, {E}, {F}\n- **Q improved**: +0.017\n\n### üìù Note:\n**Processing order**: We skipped node B and proceeded directly to C. This is an **implementation choice** for this visualization. The standard Louvain algorithm would process nodes **sequentially** (A, then B, then C, etc.). Both approaches are valid - we chose to skip B temporarily because it just formed a community with A and is unlikely to move immediately.",
      "nodes": [
        {
          "id": "A",
          "captions": [{ "value": "A | C1" }],
          "color": "#ff6b6b"
        },
        {
          "id": "B",
          "captions": [{ "value": "B | C1" }],
          "color": "#ff6b6b"
        },
        {
          "id": "C",
          "captions": [{ "value": "C ‚Üí joins {A,B}" }],
          "color": "#ff6b6b"
        },
        {
          "id": "D",
          "captions": [{ "value": "D | next" }],
          "color": "#ffeb3b"
        },
        {
          "id": "E",
          "captions": [{ "value": "E" }],
          "color": "#888888"
        },
        {
          "id": "F",
          "captions": [{ "value": "F" }],
          "color": "#888888"
        }
      ],
      "relationships": [
        {
          "id": "AB",
          "from": "A",
          "to": "B",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "AC",
          "from": "A",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "BC",
          "from": "B",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "CD",
          "from": "C",
          "to": "D",
          "captions": [{ "value": "w:1" }],
          "color": "#ffeb3b"
        },
        {
          "id": "DE",
          "from": "D",
          "to": "E",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "DF",
          "from": "D",
          "to": "F",
          "captions": [{ "value": "w:1" }]
        },
        {
          "id": "EF",
          "from": "E",
          "to": "F",
          "captions": [{ "value": "w:1" }]
        }
      ]
    },
    {
      "name": "Node D - Evaluate",
      "description": "üìä **Evaluating Node D**\n\n### Current State:\n- Node D in community {D}\n- Neighbors: C (in {A,B,C}), E (in {E}), F (in {F})\n\n### Option 1: Join community {A,B,C}\n```\nki,in = 1 (D‚ÜíC edge)\nŒ£in = 3 (A-B, A-C, B-C edges)\nŒ£tot = 7 (2+2+3)\nki = 3\n\nŒîQ(D‚Üí{A,B,C}) = [3 + 1]/14 - [(7 + 3)/14]¬≤\n                - [3/14 - (7/14)¬≤ - (3/14)¬≤]\n              = 0.286 - 0.510 - (-0.036)\n              = -0.188 ‚úó Negative!\n```\n\n### Option 2: Join community {E}\n```\nki,in = 1 (D‚ÜíE edge)\nŒ£in = 0\nŒ£tot = 2\nki = 3\n\nŒîQ(D‚Üí{E}) = [0 + 1]/14 - [(2 + 3)/14]¬≤\n          = 0.071 - 0.127 + 0.066\n          = 0.010 ‚úì Positive!\n```\n\n### Option 3: Join community {F}\n```\nŒîQ(D‚Üí{F}) = 0.010 ‚úì Positive! (same as E)\n```\n\n**Decision**: Join {E} (arbitrary choice between E and F)\n\n### System Stack:\n- **Processed**: [A, C, D]\n- **Queue**: [B, E, F]\n- **Communities**: {A,B,C}, {D,E}, {F}\n- **Q improved**: +0.010",
      "nodes": [
        {
          "id": "A",
          "captions": [{ "value": "A | C1" }],
          "color": "#ff6b6b"
        },
        {
          "id": "B",
          "captions": [{ "value": "B | C1" }],
          "color": "#ff6b6b"
        },
        {
          "id": "C",
          "captions": [{ "value": "C | C1" }],
          "color": "#ff6b6b"
        },
        {
          "id": "D",
          "captions": [{ "value": "D ‚Üí joins E" }],
          "color": "#4ecdc4"
        },
        {
          "id": "E",
          "captions": [{ "value": "E | C2" }],
          "color": "#4ecdc4"
        },
        {
          "id": "F",
          "captions": [{ "value": "F | next" }],
          "color": "#ffeb3b"
        }
      ],
      "relationships": [
        {
          "id": "AB",
          "from": "A",
          "to": "B",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "AC",
          "from": "A",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "BC",
          "from": "B",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "CD",
          "from": "C",
          "to": "D",
          "captions": [{ "value": "bridge" }],
          "color": "#e74c3c"
        },
        {
          "id": "DE",
          "from": "D",
          "to": "E",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        },
        {
          "id": "DF",
          "from": "D",
          "to": "F",
          "captions": [{ "value": "w:1" }],
          "color": "#ffeb3b"
        },
        {
          "id": "EF",
          "from": "E",
          "to": "F",
          "captions": [{ "value": "w:1" }],
          "color": "#ffeb3b"
        }
      ]
    },
    {
      "name": "Node F - Evaluate",
      "description": "üìä **Evaluating Node F**\n\n### Current State:\n- Node F in community {F}\n- Neighbors: D (in {D,E}), E (in {D,E})\n\n### Option: Join community {D,E}\n```\nki,in = 2 (F‚ÜíD and F‚ÜíE edges)\nŒ£in = 1 (D-E edge inside {D,E})\nŒ£tot = 5 (deg(D) + deg(E) = 3+2)\nki = 2 (degree of F)\n\nŒîQ(F‚Üí{D,E}) = [1 + 2]/14 - [(5 + 2)/14]¬≤\n              - [1/14 - (5/14)¬≤ - (2/14)¬≤]\n            = 0.214 - 0.250 - (-0.056)\n            = 0.020 ‚úì Positive!\n```\n\n**Decision**: Join {D,E}\n\n### System Stack:\n- **Processed**: [A, C, D, F]\n- **Queue**: [B, E] (continue iteration)\n- **Communities**: {A,B,C}, {D,E,F}\n- **Q improved**: +0.020\n- **Total ŒîQ so far**: +0.067",
      "nodes": [
        {
          "id": "A",
          "captions": [{ "value": "A | C1" }],
          "color": "#ff6b6b"
        },
        {
          "id": "B",
          "captions": [{ "value": "B | C1 | next" }],
          "color": "#ff6b6b"
        },
        {
          "id": "C",
          "captions": [{ "value": "C | C1" }],
          "color": "#ff6b6b"
        },
        {
          "id": "D",
          "captions": [{ "value": "D | C2" }],
          "color": "#4ecdc4"
        },
        {
          "id": "E",
          "captions": [{ "value": "E | C2" }],
          "color": "#4ecdc4"
        },
        {
          "id": "F",
          "captions": [{ "value": "F ‚Üí joins {D,E}" }],
          "color": "#4ecdc4"
        }
      ],
      "relationships": [
        {
          "id": "AB",
          "from": "A",
          "to": "B",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "AC",
          "from": "A",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "BC",
          "from": "B",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "CD",
          "from": "C",
          "to": "D",
          "captions": [{ "value": "bridge" }],
          "color": "#e74c3c"
        },
        {
          "id": "DE",
          "from": "D",
          "to": "E",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        },
        {
          "id": "DF",
          "from": "D",
          "to": "F",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        },
        {
          "id": "EF",
          "from": "E",
          "to": "F",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        }
      ]
    },
    {
      "name": "Nodes B,E - No Change",
      "description": "üìä **Evaluating Remaining Nodes: B and E**\n\n### Node B (in {A,B,C}):\n- Already in optimal community\n- All neighbors (A, C) are in same community\n- Moving would decrease modularity\n- **Action**: Stay\n\n### Node E (in {D,E,F}):\n- Already in optimal community\n- All neighbors (D, F) are in same community\n- Moving would decrease modularity\n- **Action**: Stay\n\n### Phase 1 Complete:\n- ‚úì All nodes processed\n- ‚úì No further improvements possible\n- ‚úì Local optimum reached\n- **Final Communities**:\n  - Community 1: {A, B, C} - 3 internal edges\n  - Community 2: {D, E, F} - 3 internal edges\n  - Bridge edges: 1 (C-D)\n- **Modularity gain**: ŒîQ ‚âà 0.357\n\n### System Stack:\n- **Phase 1**: COMPLETE ‚úì\n- **Next**: Phase 2 (Aggregation)\n- **Communities stable**: YES\n\n### üìù Note:\n**Skipped nodes revisited**: Here we evaluate nodes B and E, which we chose to skip earlier in our iteration. Even though we deferred their evaluation for pedagogical clarity, we still process them to remain **faithful to the Louvain algorithm**, which requires visiting all nodes in each pass. As expected, both nodes are already optimally placed and don't move.",
      "nodes": [
        {
          "id": "A",
          "captions": [{ "value": "A | C1 ‚úì" }],
          "color": "#ff6b6b"
        },
        {
          "id": "B",
          "captions": [{ "value": "B | C1 ‚úì" }],
          "color": "#ff6b6b"
        },
        {
          "id": "C",
          "captions": [{ "value": "C | C1 ‚úì" }],
          "color": "#ff6b6b"
        },
        {
          "id": "D",
          "captions": [{ "value": "D | C2 ‚úì" }],
          "color": "#4ecdc4"
        },
        {
          "id": "E",
          "captions": [{ "value": "E | C2 ‚úì" }],
          "color": "#4ecdc4"
        },
        {
          "id": "F",
          "captions": [{ "value": "F | C2 ‚úì" }],
          "color": "#4ecdc4"
        }
      ],
      "relationships": [
        {
          "id": "AB",
          "from": "A",
          "to": "B",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "AC",
          "from": "A",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "BC",
          "from": "B",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "CD",
          "from": "C",
          "to": "D",
          "captions": [{ "value": "bridge" }],
          "color": "#e74c3c"
        },
        {
          "id": "DE",
          "from": "D",
          "to": "E",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        },
        {
          "id": "DF",
          "from": "D",
          "to": "F",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        },
        {
          "id": "EF",
          "from": "E",
          "to": "F",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        }
      ]
    },
    {
      "name": "Phase 2 - Aggregation",
      "description": "üîÑ **Phase 2: Community Aggregation**\n\nNodes belonging to the same community are merged into **super-nodes**:\n\n### Aggregation Process:\n\n**Community 1 ‚Üí Super-node S1:**\n- **Nodes**: A, B, C (3 nodes)\n- **Internal edges**: 3 (A-B, A-C, B-C)\n- **Total degree**: 2+2+3 = 7\n- **Self-loop weight**: 3 (internal edges)\n\n**Community 2 ‚Üí Super-node S2:**\n- **Nodes**: D, E, F (3 nodes)\n- **Internal edges**: 3 (D-E, D-F, E-F)\n- **Total degree**: 3+2+2 = 7\n- **Self-loop weight**: 3 (internal edges)\n\n**Inter-community edges:**\n- **S1 ‚Üî S2**: weight 1 (from C-D bridge)\n\n### New Aggregated Graph:\n- **Nodes**: 2 super-nodes\n- **Edges**: 1 inter-community edge\n- **Self-loops**: S1 (weight 3), S2 (weight 3)\n\n### System Stack:\n- **Phase 2**: START\n- **Super-nodes created**: 2\n- **Ready for**: Phase 1 on aggregated graph",
      "nodes": [
        {
          "id": "super1",
          "captions": [{ "value": "S1: {A,B,C} | w:3" }],
          "color": "#ff6b6b",
          "size": 80
        },
        {
          "id": "super2",
          "captions": [{ "value": "S2: {D,E,F} | w:3" }],
          "color": "#4ecdc4",
          "size": 80
        }
      ],
      "relationships": [
        {
          "id": "super_e1",
          "from": "super1",
          "to": "super2",
          "captions": [{ "value": "bridge | w:1" }],
          "color": "#e74c3c"
        }
      ]
    },
    {
      "name": "Super-graph Evaluation",
      "description": "üìä **Phase 1 on Aggregated Graph**\n\n### Evaluate Super-node S1:\n```\nCurrent: S1 in community {S1}\nNeighbor: S2 in community {S2}\n\nOption: Merge S1 ‚Üí {S2}\n\nCalculation:\nki,in = 1 (S1‚ÜíS2 edge)\nŒ£in = 3 (self-loop of S2)\nŒ£tot = 7 (total degree of S2)\nki = 7 (total degree of S1)\nm = 7 (original total edges)\n\nŒîQ(S1‚Üí{S2}) = [3 + 1]/14 - [(7 + 7)/14]¬≤\n              - [3/14 - (7/14)¬≤ - (7/14)¬≤]\n            = 0.286 - 1.0 - (-0.429)\n            = -0.285 ‚úó NEGATIVE!\n```\n\n### Decision:\n**DO NOT MERGE** - Merging would decrease modularity\n\n### Analysis:\n- Bridge connection (weight 1) is too weak\n- Internal community structure (weight 3 each) is too strong\n- Current partition is optimal\n\n### System Stack:\n- **Phase 1 on super-graph**: COMPLETE\n- **Modularity change**: 0 (no improvement)\n- **Algorithm terminates**: YES\n\n**Result**: Communities remain separate",
      "nodes": [
        {
          "id": "super1",
          "captions": [{ "value": "S1: {A,B,C} ‚úì" }],
          "color": "#ff6b6b",
          "size": 80
        },
        {
          "id": "super2",
          "captions": [{ "value": "S2: {D,E,F} ‚úì" }],
          "color": "#4ecdc4",
          "size": 80
        }
      ],
      "relationships": [
        {
          "id": "super_e1",
          "from": "super1",
          "to": "super2",
          "captions": [{ "value": "bridge | w:1" }],
          "color": "#e74c3c"
        }
      ]
    },
    {
      "name": "Final Result",
      "description": "üéâ **Algorithm Terminates - Final Communities**\n\n### Community 1 (üî¥):\n- **Nodes**: A, B, C\n- **Internal edges**: 3\n- **Internal edge ratio**: 3/3 = 100%\n- **Modularity contribution**: +0.214\n\n### Community 2 (üîµ):\n- **Nodes**: D, E, F\n- **Internal edges**: 3\n- **Internal edge ratio**: 3/3 = 100%\n- **Modularity contribution**: +0.214\n\n### Bridge Connection:\n- **Edge**: C ‚Üî D (weight 1)\n- **Role**: Structural bridge between communities\n- **Contribution**: -0.071\n\n### Final Modularity Score:\n- **Q_final**: ‚âà 0.357\n- **Q_initial**: 0.0\n- **Improvement**: +0.357\n- **Interpretation**:\n  - Q > 0.3: Strong community structure ‚úì\n  - Clear separation between communities\n  - Optimal partition found\n\n### Algorithm Summary:\n- ‚úì Phase 1: Local moving (6 nodes processed)\n- ‚úì Phase 2: Aggregation (2 super-nodes)\n- ‚úì Phase 1 on super-graph (no improvement)\n- ‚úì Termination: Optimal solution reached\n- **Total iterations**: 2 passes\n- **Converged**: YES\n\n### üìù Note:\n**Going further - Alternative starting point**: This result depends on the processing order. If we had started with node D instead of A, and D first linked to C (creating {C,D}), then when we later evaluated node A, we would compute:\n- ŒîQ(A‚Üí{A,B}): Positive (strong internal connections)\n- ŒîQ(A‚Üí{C,D}): Lower modularity gain\n\nIn that scenario, **A would extract C from the {C,D} community** and form {A,B,C} with higher modularity. This shows how **greedy local optimization** can produce different intermediate paths, though both often converge to similar final quality.",
      "nodes": [
        {
          "id": "A",
          "captions": [{ "value": "A | C1 ‚úì" }],
          "color": "#ff6b6b"
        },
        {
          "id": "B",
          "captions": [{ "value": "B | C1 ‚úì" }],
          "color": "#ff6b6b"
        },
        {
          "id": "C",
          "captions": [{ "value": "C | C1 ‚úì" }],
          "color": "#ff6b6b"
        },
        {
          "id": "D",
          "captions": [{ "value": "D | C2 ‚úì" }],
          "color": "#4ecdc4"
        },
        {
          "id": "E",
          "captions": [{ "value": "E | C2 ‚úì" }],
          "color": "#4ecdc4"
        },
        {
          "id": "F",
          "captions": [{ "value": "F | C2 ‚úì" }],
          "color": "#4ecdc4"
        }
      ],
      "relationships": [
        {
          "id": "AB",
          "from": "A",
          "to": "B",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "AC",
          "from": "A",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "BC",
          "from": "B",
          "to": "C",
          "captions": [{ "value": "intra" }],
          "color": "#ff6b6b"
        },
        {
          "id": "CD",
          "from": "C",
          "to": "D",
          "captions": [{ "value": "bridge" }],
          "color": "#e74c3c"
        },
        {
          "id": "DE",
          "from": "D",
          "to": "E",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        },
        {
          "id": "DF",
          "from": "D",
          "to": "F",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        },
        {
          "id": "EF",
          "from": "E",
          "to": "F",
          "captions": [{ "value": "intra" }],
          "color": "#4ecdc4"
        }
      ]
    }
  ]
}
